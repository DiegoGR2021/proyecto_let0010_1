---
title: "Análisis de la Rentabilidad Real de los Fondos de Pensiones"
author: "Diego Gallo"
format: html
editor: visual
---

# **Introducción**

Uno de los aspectos que me resulta más interesante respecto a los polémicos fondos de pensiones en Chile, es su funcionamiento y cómo se ven afectados por acontecimientos tanto internacionales, como los que ocurren en nuestra propia patria, y para eso, necesitamos saber qué son específicamente, los fondos que hay, y las AFP que existen.

# **Contexto**

Las administradoras de fondos de pensiones, o mejor conocidas como A.F.P, son instituciones financieras encargadas de administrar los fondos de cuentas individuales de ahorro para pensiones, entonces corresponden a un patrimonio constituido por todas la cotizaciones obligatorias y voluntarias que efectúan los trabajadores en su cuenta de capitalización individual, más depósitos voluntarios, y aportes adicionales, junto a las rentabilidades de sus respectivas inversiones, restando las comisiones que cobran la administradora.

Existen 5 alternativas de inversión, denominados fondos de pensiones tipo A, B, C, D y E, estos se diferencian en la proporción de los recursos financieros invertidos en renta variable y renta fija, en donde los primeros representan propiedad de una sociedad o empresa, tales como acciones, por ende tienen mayor riesgo y rentabilidad esperada, los segundos tienen una rentabilidad conocida que varía de acuerdo a su valor de mercado, y tienen menor riesgo y menos rentabilidad esperada.

De los 5 fondos antes mencionados, el fondo A tiene una mayor proporción invertida en renta variable, que disminuye a medida que nos acercamos a los fondos B, C, y D, y finalmente el fondo E, invierte principalmente en renta fija.

Actualmente las inversiones se rigen por los siguientes máximos y mínimos para instrumentos de renta variable:

Fondo A: Máximo = 80%, Mínimo obligatorio = 40%

Fondo B: Máximo = 60%, Mínimo obligatorio = 25%

Fondo C: Máximo = 40%, Mínimo obligatorio = 15%

Fondo D: Máximo = 20%, Mínimo obligatorio = 5%

Fondo E: Máximo = 5%, Mínimo obligatorio = 0%. \[1\]

# **Análisis Exploratorio**

```{r, echo = FALSE}
library(forecast)
library(plyr)
library(rio)
library(tidyverse)

set.seed(22091998)
```


```{r}
datos = rio::import("C:/Users/Diego/Desktop/proyecto_let0010_1/datos/30-11-2021_rentabilidad_afps.xlsx")
retornos_capital_a = datos[datos$A.F.P. == "CAPITAL", ]
retornos_capital_a = retornos_capital_a[c("A", "Año", "Mes")]
retornos_capital_a$Mes = plyr::revalue(retornos_capital_a$Mes, c("Enero" = 1, "Febrero" = 2, "Marzo" = 3, "Abril" = 4, "Mayo" = 5, "Junio" = 6, "Julio" = 7, "Agosto" = 8, "Septiembre" = 9, "Octubre" = 10, "Noviembre" = 11, "Diciembre" = 12))
retornos_capital_a$Mes = as.numeric(retornos_capital_a$Mes)
retornos_capital_a$Año = as.numeric(retornos_capital_a$Año)

retornos_capital_a$t = retornos_capital_a$Año + (retornos_capital_a$Mes - 1)/12
new_ret = retornos_capital_a[c("t", "A")]

rm(datos)
```


```{r}
ggplot(retornos_capital_a, aes(x = t, y = A)) +
  geom_line() +
  theme_minimal()
```

```{r}
bacf <- acf(c(retornos_capital_a$A, retornos_capital_a$t), plot = FALSE)
bacfdf <- with(bacf, data.frame(lag, acf))

ggplot(data = bacfdf, mapping = aes(x = lag, y = acf)) +
  geom_hline(aes(yintercept = 0)) +
  geom_segment(mapping = aes(xend = lag, yend = 0))
```

```{r}
ggAcf(new_ret,
      lag.max = 20)
```

```{r}
ggPacf(new_ret,
      lag.max = 20)
```

